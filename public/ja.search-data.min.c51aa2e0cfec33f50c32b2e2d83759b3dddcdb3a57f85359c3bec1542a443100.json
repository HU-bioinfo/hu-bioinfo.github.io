[{"id":0,"href":"/docs/tutorials/","title":"Tutorials","section":"Docs","content":" Tutorials # "},{"id":1,"href":"/docs/tutorials/tidyverse/","title":"Tidyverse","section":"Tutorials","content":" Tidyverse # Tidyverseってなんぞや # Tidyverseは，データ分析と可視化を効率的に行うために設計されたR言語のパッケージ群です． このパッケージの思想上の特徴としてTidy Dataの原則のもと，一貫性のある操作体系により，データ処理の生産性を保つことを特徴としています．\nとはいえ含まれる内容や思想も膨大かつ難解なので，この章では，よくする使い方をメインに書いていきます． より詳しく知りたい方は，それぞれ詳細のページを見てください．(現在製作中です)\nTidyverseのパッケージ群 パッケージ名 役割 主な機能 ggplot2 データ可視化 グラフィックスの文法に基づいて、グラフを宣言的に作成できる dplyr データ操作 フィルタリング，要約，並べ替え，結合といったデータ操作 tidyr データ整理 Tidy data作成 readr データ読み込み 矩形データ（csv、tsv、fwfなど）の高速読み込み purrr 関数型プログラミング ベクトルやリストの操作（map関数など） tibble データフレームの現代的な再構築 モダンなデータフレーム構造 stringr 文字列操作 パターンマッチングや文字列の処理 forcats 因子型操作 因子データのレベルの順序や値の変更など lubridate 日付・時刻データ操作 日付や時間の解析と処理 Tidy Data # 基本的にデータはExcelのように表形式となったデータを扱います．この時，ただ漫然と表を作成するのではなく，一定のルールの下に作成，加工していくことで効率や安全性が増します．具体的なルールとは以下の三つのことです.\n一つの変数は一つの列に（Each variable must have its own column.） 一つの観測は一つの行に（Each observation must have its own row.） 一つの値は一つのセルに（Each value must have its own cell.） 上記3つを満たした表形式のデータを Tidy Data(整列データ) といいます．\n一つの変数は一つの列に（Each variable must have its own column.） # この原則における変数とは，データの特徴を表すものです．人を対象にしたデータだとすると名前，身長，体重，年齢などが該当します．考え方として列では，単位が揃うようなデータにするようにします．例えば，一つの列でcmやkgが同時に登場しないようにします．\n良い例 名前 年齢 身長 (cm) 体重 (kg) 太郎 25 170 65 花子 22 160 50 悪い例 名前 属性 値 太郎 年齢 25 太郎 身長 170 太郎 体重 65 花子 年齢 22 花子 身長 160 花子 体重 50 一つの観測は一つの行に（Each observation must have its own row.） # 観測とは、一つのデータのまとまりのことを指します．人を対象にしたデータだとすると名前がAlice,身長160cm，体重50kg，年齢20歳という一人のデータのことを指します．これらをまとめて一つのデータとして，行単位で追加していきます．\n良い例 名前 年齢 身長 (cm) 体重 (kg) 太郎 25 170 65 花子 22 160 50 悪い例 名前 データ 太郎 25歳 太郎 170cm 太郎 65kg 花子 22歳 花子 160cm 花子 50kg 一つの値は一つのセルに（Each value must have its own cell.） # 各セルに入る値は，一つだけにするという原則です．名前がAliceというデータについて，身長が2つや3つもあるのは不自然ですよね． ただし，Tidyverseで提供されているtibbleというデータフレーム(Excelの表の強化版みたいなもの)は一つのセルの中に,配列を入れることができたり，さらにtibbleを格納することもできるので，必ずしもこの原則が達成されているとは限らないので注意が必要です．\n良い例 名前 好きな食べ物 太郎 寿司 太郎 ラーメン 花子 カレー 花子 パスタ 悪い例 名前 好きな食べ物 太郎 寿司, ラーメン 花子 カレー, パスタ 以上の内容を意識すると，統一的な記述方法でデータを解析，整形することができるので，tidy dataを意識してデータ解析すると良いでしょう．\n余談 Tidy Dataが解析しやすいデータだとすれば，それ以外のデータは解析しずらい，めんどくさいデータです．例え人にとって見やすかったり，扱いやすかったりしてもTidyでないならコンピュータには扱いづらいです．そのため，データを提供する側と解析する側では，往々にしてこの部分ですれ違いがあったりするので，何かデータを扱うときはTidyであるかどうかを気にしてみるといいかもしれません．\nパイプライン演算子 |\u0026gt; # Tidyverseを使用していく上でパイプライン演算子|\u0026gt; を活用することで，処理を簡潔かつ解釈しやすく記述することができます．\n関数 # まず，パイプライン演算子を使う前に，プログラミングにおける関数について説明します．プログラミングにおける関数は，ある処理のまとまりを集めて，いつでも呼び出せるようにしたものです．これは数学における，ある集合からある集合への対応を示す関数とは違い，サブルーチンといった方がより適切です．そのため，処理をまとめただけの関数もあれば，ある入力に対してある出力を返す関数があったりします．\nここで入力に対応するものを引数，出力に対応するものを返り値(戻り値)といいます．\n純粋関数という概念があります．純粋関数とは所謂，数学における関数と等価なもので，ある入力(引数)に対して，いつも同じ出力(返り値)を返す関数です．この純粋関数を組み合わせることでコーディングをしていくのがTidyverseとパイプラインを組み合わせた方法です．\n具体的には純粋関数は，同じ引数に対して，特定の返り値を返すので，ある純粋関数の返り値をそのまま，別の純粋関数の引数に入力することで，処理を記述していきます．これまでのプログラミングといえばやりたいことを逐一丁寧に記述していく手続き型プログラミングといったものを行ってきました．しかし，それとは考え方，アプローチが違ってくるので戸惑う点があるかもしれません．とはいえ，基本的にプログラミングとは何をするかというと，与えられた入力(データ)を加工していく処理，作業に他なりません．その大前提を意識しておけば，どちらもやることがたいして変わりません．以下で具体例を見てみましょう．\n余談 純粋関数とは，ある引数に対して特定の返り値を返す—つまりは引数が同じ時，常に同じ返り値を返すことと，副作用が発生しない関数のことを指します．副作用とは引数以外の入力，返り値以外の出力を伴うことです．具体的には関数の外の変数を参照，変更することであったり，I/O画面やストレージと相互作用をすることを指します．\n例えばprint関数であったり(文字を外部に出力するため), random関数(同じ引数を入力しても出力がランダム)といった関数が非純粋関数となります．\nしかし，Rにおいてそのような関数は大多数を占めますし，本当の意味で純粋関数は少ないのですが，今回は簡単のために上記ような解説となりました．\nパイプライン演算子を使ってみよう # 初めに手続きプログラミング的にコードを書いてみます．以下のコードは，データフレームdfを宣言し，value列の値が20より大きいものを選別し，groupごとに集計し，groupごとの平均値を算出したものを出力するコードです．\nlibrary(dplyr) df \u0026lt;- data.frame( group = c(\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;, \u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;, \u0026#34;A\u0026#34;), value = c(10, 20, 30, 40, 50) ) temp1 \u0026lt;- filter(df, value \u0026gt; 20) # 20より大きい値をフィルタ temp2 \u0026lt;- group_by(temp1, group) # \u0026#34;group\u0026#34; でグループ化 result \u0026lt;- summarise(temp2, mean_value = mean(value)) # \u0026#34;group\u0026#34;ごとの平均値を計算 print(result) このようなコードでは，変数temp1, temp2のように演算結果を一時的に保存するためだけの変数を宣言したりと無駄が多いです．無駄が多くなると，論理を追いづらくなったり，コードを手直しするにも大変です．\n次の例では一時的な変数を作成しないようにコードを書き直してみます．\nresult \u0026lt;- summarise( group_by(filter(df, value \u0026gt; 20), group), mean_value = mean(value) ) print(result) この書き方では，余計な変数はありませんが，関数の中に関数を書き込んだ形になってしまい，非常に可読性が悪いです．私たちは右から左，外から内に文字を読むのに，処理の流れは左から右に，内から外の順番になってしまっています． ここでパイプライン演算子の出番です．Rのパイプライン演算子|\u0026gt;はある関数の返り値をそのまま，次の関数の第一引数にしてしまいます．\nlibrary(dplyr) df |\u0026gt; filter(value \u0026gt; 20) |\u0026gt; group_by(group) |\u0026gt; summarise(mean_value = mean(value)) |\u0026gt; print() こうすることによって，処理の流れと記述の流れが同じになりました．純粋関数を用いると同じ引数に対し，同じ返り値が帰ってくるので，このような記述が可能になります．\nAdvanced やや発展的な内容になりますが，パイプライン演算子にはRで定義されたnative pipelineと呼ばれる|\u0026gt;とTidyverseのmagrittrパッケージによって提供されている%\u0026gt;%の2種類があります．\nこれらの使い分けとしては，返り値を第一引数ではない場所に用いたい時に，やり方が異なります．%\u0026gt;%では第二引数などに値を渡す時.を使うことで可能になります(place holderといいます)．|\u0026gt;では_を使用しますが，x |\u0026gt; f(100, y=_)のように名前付き引数の時だけ使用できます．\n# place holderは`.`。引数名を指定しなくても良い。 c(\u0026#34;apple\u0026#34;, \u0026#34;pineapple\u0026#34;, \u0026#34;banana\u0026#34;) %\u0026gt;% grepl(\u0026#34;apple\u0026#34;, .) #\u0026gt; TRUE TRUE FALSE # place holderは`_`。引数名を指定しなければいけない。 c(\u0026#34;apple\u0026#34;, \u0026#34;pineapple\u0026#34;, \u0026#34;banana\u0026#34;) |\u0026gt; grepl(\u0026#34;apple\u0026#34;, x = _) #\u0026gt; TRUE TRUE FALSE # 引数名を指定しないとエラーになる。 c(\u0026#34;apple\u0026#34;, \u0026#34;pineapple\u0026#34;, \u0026#34;banana\u0026#34;) |\u0026gt; grepl(\u0026#34;apple\u0026#34;, _) #\u0026gt; Error: pipe placeholder can only be used as a named argument また複数箇所にplace holderを使用したい場合,%\u0026gt;%しか選択肢はありません． とはいえ，基本的には|\u0026gt;の方が高速に動作し，何よりパッケージではなく，R言語そのもので定義されているので，|\u0026gt;を使用するのを個人的には推奨します．\nTidyverseで遊んでみよう # お待たせしました．ここからは実際にcsvデータを加工して，Tidyverseの凄さを思い知りましょう．Tidyverseには多くのパッケージが含まれますが，ここではよく使う，dplyrを中心に使っていきます．\nここで加工していくデータは,dplyr内に練習用として定義されているstarwarsのデータを用います．スターウォーズのキャラクターについての情報が詰まれたデータフレームです． glimpse関数を使用することで，データフレームの概観を知ることができます．(そのままstarwarsと入力するだけでもいいです)\nstarwars |\u0026gt; glimpse() #\u0026gt; Rows: 87 #\u0026gt; Columns: 14 #\u0026gt; $ name \u0026lt;chr\u0026gt; \u0026#34;Luke Skywalker\u0026#34;, \u0026#34;C-3PO\u0026#34;, \u0026#34;R2-D2\u0026#34;, \u0026#34;Darth Vader\u0026#34;, \u0026#34;L… #\u0026gt; $ height \u0026lt;int\u0026gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, … #\u0026gt; $ mass \u0026lt;dbl\u0026gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.… #\u0026gt; $ hair_color \u0026lt;chr\u0026gt; \u0026#34;blond\u0026#34;, NA, NA, \u0026#34;none\u0026#34;, \u0026#34;brown\u0026#34;, \u0026#34;brown, grey\u0026#34;, \u0026#34;bro… #\u0026gt; $ skin_color \u0026lt;chr\u0026gt; \u0026#34;fair\u0026#34;, \u0026#34;gold\u0026#34;, \u0026#34;white, blue\u0026#34;, \u0026#34;white\u0026#34;, \u0026#34;light\u0026#34;, \u0026#34;lig… #\u0026gt; $ eye_color \u0026lt;chr\u0026gt; \u0026#34;blue\u0026#34;, \u0026#34;yellow\u0026#34;, \u0026#34;red\u0026#34;, \u0026#34;yellow\u0026#34;, \u0026#34;brown\u0026#34;, \u0026#34;blue\u0026#34;, \u0026#34;… #\u0026gt; $ birth_year \u0026lt;dbl\u0026gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, … #\u0026gt; $ sex \u0026lt;chr\u0026gt; \u0026#34;male\u0026#34;, \u0026#34;none\u0026#34;, \u0026#34;none\u0026#34;, \u0026#34;male\u0026#34;, \u0026#34;female\u0026#34;, \u0026#34;male\u0026#34;, \u0026#34;fe… #\u0026gt; $ gender \u0026lt;chr\u0026gt; \u0026#34;masculine\u0026#34;, \u0026#34;masculine\u0026#34;, \u0026#34;masculine\u0026#34;, \u0026#34;masculine\u0026#34;, \u0026#34;… #\u0026gt; $ homeworld \u0026lt;chr\u0026gt; \u0026#34;Tatooine\u0026#34;, \u0026#34;Tatooine\u0026#34;, \u0026#34;Naboo\u0026#34;, \u0026#34;Tatooine\u0026#34;, \u0026#34;Alderaa… #\u0026gt; $ species \u0026lt;chr\u0026gt; \u0026#34;Human\u0026#34;, \u0026#34;Droid\u0026#34;, \u0026#34;Droid\u0026#34;, \u0026#34;Human\u0026#34;, \u0026#34;Human\u0026#34;, \u0026#34;Human\u0026#34;,… #\u0026gt; $ films \u0026lt;list\u0026gt; \u0026lt;\u0026#34;A New Hope\u0026#34;, \u0026#34;The Empire Strikes Back\u0026#34;, \u0026#34;Return of… #\u0026gt; $ vehicles \u0026lt;list\u0026gt; \u0026lt;\u0026#34;Snowspeeder\u0026#34;, \u0026#34;Imperial Speeder Bike\u0026#34;\u0026gt;, \u0026lt;\u0026gt;, \u0026lt;\u0026gt;, \u0026lt;\u0026gt;… #\u0026gt; $ starships \u0026lt;list\u0026gt; \u0026lt;\u0026#34;X-wing\u0026#34;, \u0026#34;Imperial shuttle\u0026#34;\u0026gt;, \u0026lt;\u0026gt;, \u0026lt;\u0026gt;, \u0026#34;TIE Advance… glimpse()を適用すると,行と列がひっくり返ってしまうので注意が必要です．しかし，これでstarwarsが87×14のtibbleで，それぞれの列がどのようなデータを保持しているがわかりました．例えばname列はcharacter(文字列)を保持している列ですね．\nGet Home 列の操作 # まず初めに列に対する操作です．パイプ演算子|\u0026gt;を使ってselect関数を適用することで，列を抽出できます．rename関数では列名を新しく付け替えることができます．\nstarwars |\u0026gt; select(name, height, homeworld) #name, height, homeworld列だけを抽出 #\u0026gt; # A tibble: 87 × 3 #\u0026gt; name height homeworld #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Luke Skywalker 172 Tatooine #\u0026gt; 2 C-3PO 167 Tatooine #\u0026gt; 3 R2-D2 96 Naboo #\u0026gt; 4 Darth Vader 202 Tatooine starwars |\u0026gt; select(!starships) # starships以外の列を抽出 #\u0026gt; # A tibble: 87 × 13 #\u0026gt; name height mass hair_color skin_color eye_color birth_year sex gender #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Luke Sk… 172 77 blond fair blue 19 male mascu… #\u0026gt; 2 C-3PO 167 75 NA gold yellow 112 none mascu… #\u0026gt; 3 R2-D2 96 32 NA white, bl… red 33 none mascu… #\u0026gt; 4 Darth V… 202 136 none white yellow 41.9 male mascu… starwars |\u0026gt; select(ends_with(\u0026#34;color\u0026#34;)) #末尾がcolorで終わる列(hair_color, skin_color, eye_color)を抽出 #\u0026gt; # A tibble: 87 × 3 #\u0026gt; hair_color skin_color eye_color #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 blond fair blue #\u0026gt; 2 NA gold yellow #\u0026gt; 3 NA white, blue red #\u0026gt; 4 none white yellow starwars |\u0026gt; select(where(is.character)) #値が文字列(chr)である列を抽出 #\u0026gt; # A tibble: 87 × 8 #\u0026gt; name hair_color skin_color eye_color sex gender homeworld species #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Luke Skywalker blond fair blue male mascu… Tatooine Human #\u0026gt; 2 C-3PO NA gold yellow none mascu… Tatooine Droid #\u0026gt; 3 R2-D2 NA white, bl… red none mascu… Naboo Droid #\u0026gt; 4 Darth Vader none white yellow male mascu… Tatooine Human starwars |\u0026gt; select(homeworld) |\u0026gt; # homeworld列を抽出 rename(home_planet = homeworld) # 列名homeworldをhome_planetに変更 #\u0026gt; # A tibble: 87 × 1 #\u0026gt; home_planet #\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Tatooine #\u0026gt; 2 Tatooine #\u0026gt; 3 Naboo #\u0026gt; 4 Tatooine #\u0026gt; 5 Alderaan 行の操作 # slice_*系の関数は行の操作に使います．slice関数は指定した行番号の列を，slice_head,slice_tailはそれぞれ最初のn行と最後のn行を，slice_min, slice_maxは指定して列の値が小さい順ないし大きい順にn行抽出します．\nfilter関数は何かの条件と合致する(あるいは合致しない)行のみ抽出する関数です． arrange関数はソート関数です．\nstarwars |\u0026gt; select(name, homeworld) |\u0026gt; # name, homeworld列だけ抽出 filter(homeworld == \u0026#34;Tatooine\u0026#34;) |\u0026gt; # homeworldがTatooineの行のみを抽出 slice_head(n = 4) # そのうち先頭4行だけ抽出 #\u0026gt; # A tibble: 4 × 2 #\u0026gt; name homeworld #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Luke Skywalker Tatooine #\u0026gt; 2 C-3PO Tatooine #\u0026gt; 3 Darth Vader Tatooine #\u0026gt; 4 Owen Lars Tatooine starwars |\u0026gt; select(name, height, homeworld) |\u0026gt; # name,height,homeworld列だけ抽出 filter(homeworld != \u0026#34;Tatooine\u0026#34;) |\u0026gt; # homeworldがTatooineでない行を抽出 slice_max(height, n = 3) # そのうちheightが大きい順に3行抽出 #\u0026gt; # A tibble: 3 × 3 #\u0026gt; name height homeworld #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Yarael Poof 264 Quermia #\u0026gt; 2 Tarfful 234 Kashyyyk #\u0026gt; 3 Lama Su 229 Kamino starwars |\u0026gt; select(name, hair_color, height, mass) |\u0026gt; # name, height, sex, homeworld列を抽出 filter(!is.na(mass), height \u0026gt;= 100, hair_color == \u0026#34;blond\u0026#34;) |\u0026gt; # massが欠損値がなくて，尚且つheightが100以上かつ，hair_colorがblondの行を抽出 arrange(mass) # massが昇順になるようにソート #\u0026gt; # A tibble: 2 × 4 #\u0026gt; name hair_color height mass #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; #\u0026gt; 1 Luke Skywalker blond 172 77 #\u0026gt; 2 Anakin Skywalker blond 188 84 データの要約 # summarise関数を使うと変数の平均値や標準偏差などの記述統計量(要約統計量)を計算できます. group_by関数と組み合わせることで値ごとの記述統計量を出すことができます．\nstarwars |\u0026gt; group_by(homeworld) |\u0026gt; # homeworldごとに集計 summarise( height_mean = mean(height, na.rm = TRUE), #欠損値を除外してheightの平均を計算 mass_mean = mean(mass, na.rm = TRUE), #欠損値を除外してmassの平均を計算 ) #\u0026gt; # A tibble: 49 × 3 #\u0026gt; homeworld height_mean mass_mean #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; #\u0026gt; 1 Alderaan 176. 64 #\u0026gt; 2 Aleen Minor 79 15 #\u0026gt; 3 Bespin 175 79 #\u0026gt; 4 Bestine IV 180 110 データの拡張 # mutate関数はtibble内の変数を用いて計算を行い，その結果を新しい列として追加する関数です．\nstarwars |\u0026gt; select(name, height) |\u0026gt; mutate(height_M = height / 100) # heightを100でわりm換算したものをheight_in_mとした #\u0026gt; # A tibble: 87 × 3 #\u0026gt; name height height_M #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; #\u0026gt; 1 Luke Skywalker 172 1.72 #\u0026gt; 2 C-3PO 167 1.67 #\u0026gt; 3 R2-D2 96 0.96 #\u0026gt; 4 Darth Vader 202 2.02 starwars |\u0026gt; select(name, height, mass) |\u0026gt; mutate(height_M = height / 100, BMI = mass / height_M / height_M) |\u0026gt; # heightを100でわりm換算したものをheight_in_mとした mutate(is_obesity = if_else(BMI \u0026gt;= 25, true=\u0026#34;obesity\u0026#34;, false=\u0026#34;not_obesity\u0026#34;)) # if_else関数を用いると,条件を指定して値を指定できる #\u0026gt; # A tibble: 87 × 6 #\u0026gt; name height mass height_M BMI is_obesity #\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;chr\u0026gt; #\u0026gt; 1 Luke Skywalker 172 77 1.72 26.0 obesity #\u0026gt; 2 C-3PO 167 75 1.67 26.9 obesity #\u0026gt; 3 R2-D2 96 32 0.96 34.7 obesity #\u0026gt; 4 Darth Vader 202 136 2.02 33.3 obesity #\u0026gt; 5 Leia Organa 150 49 1.5 21.8 not_obesity 練習問題 # 以下は練習問題です．これまで学習してきたこと＋αな内容ですので，適宜，chatGPTに聞いてみたり調べたりしながら解いてみてください．\n問題1 # starwars データセットの構造を確認せよ。\n💡 ヒント: glimpse(), head(), dim() などを使う\nAnswer starwars |\u0026gt; glimpse() starwars |\u0026gt; head() starwars |\u0026gt; dim() 問題2 # starwarsデータセットのうち，gender が \u0026ldquo;male\u0026rdquo; かつ mass (体重) が 80kg 以上のキャラクターを抽出せよ\nAnswer starwars |\u0026gt; filter(gender == \u0026#34;male\u0026#34;, mass \u0026gt;= 80) 問題3 # name, height, mass, homeworld の4列のみを選択し，キャラクターを mass の降順で並べ替えよ．\n💡 ヒント: arrange関数と，desc関数について調べてみよう\nAnswer starwars |\u0026gt; select(name, heightm, mass, homeworld) |\u0026gt; arrange(desc(mass)) 問題4 # nameと列名にアンダーバー _を含む列のみを選択せよ\n💡 ヒント: select, contains関数の使い方を調べてみよう\nAnswer starwars |\u0026gt; select(name, contains(\u0026#34;_\u0026#34;)) 問題5 # birth_year が 100 より大きい場合は \u0026ldquo;Old\u0026rdquo;、それ以外は \u0026ldquo;Young\u0026rdquo; とする age_category という新しい列を作成せよ\n💡 ヒント: if_else関数の使い方を調べてみよう\nAnswer starwars |\u0026gt; mutate(age_category = if_else(birth_year \u0026gt; 100, \u0026#34;Old\u0026#34;, \u0026#34;Young\u0026#34;)) 問題6 # 以下のルールに基づいて weight_category という新しい列を作成せよ。\nmass が 100 kg 以上なら \u0026ldquo;Heavy\u0026rdquo; mass が 50 以上 100 未満なら \u0026ldquo;Medium\u0026rdquo; mass が 50 未満なら \u0026ldquo;Light\u0026rdquo; mass が NA の場合は \u0026ldquo;Unknown\u0026rdquo; 💡 ヒント: case_when関数の使い方を調べてみよう\nAnswer starwars |\u0026gt; mutate(weight_category = case_when( is.na(mass) ~ \u0026#34;Unknown\u0026#34;, mass \u0026gt;= 100 ~ \u0026#34;Heavy\u0026#34;, mass \u0026gt;= 50 ~ \u0026#34;Medium\u0026#34;, TRUE ~ \u0026#34;Lignt\u0026#34; )) 問題7 # species ごとに、\nキャラクター数 (n()) height の平均 (mean(height, na.rm = TRUE)) mass の平均 (mean(mass, na.rm = TRUE)) を求めよ。 ただし、キャラクター数が 3 人未満の種族は除外せよ。\n💡 ヒント: group_by, summarise, filter関数の使い方を調べてみよう\nAnswer starwars |\u0026gt; group_by(species) |\u0026gt; summarise( N = n(), height_mean = mean(height, na.rm = TRUE), mass_mean = mean(mass, na.rm = TRUE) ) |\u0026gt; filter(N \u0026gt; 3) 問題8 # NA を含む数値型の列をすべて選択し、それらの NA を 0 に置き換えよ。\n💡 ヒント: mutate, across, where関数の使い方を調べてみよう. Rにおける無名関数について調べてみよう\nAnswer starwars |\u0026gt; mutate(across(where(is.numeric), ~ replace(., is.na(.), 0))) "},{"id":2,"href":"/docs/about/","title":"About","section":"Docs","content":"私たちは北海道大学医学部に在学する学生によって構成されている学生団体です. バイオインフォマティクスや広く情報科学ついて学習し合っている団体です．\n"},{"id":3,"href":"/docs/members/","title":"Members","section":"Docs","content":"Comming soon\u0026hellip;\n"},{"id":4,"href":"/docs/tutorials/example/","title":"Example","section":"Tutorials","content":" Example # Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\nCode example # def main(): print(\u0026#34;Hello wold\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: main() Tex example # 数式もかけるよ: \\(\\int_{-\\infty}^{\\infty}e^{-t^2}dt=\\pi.\\) \\[ \\int_{-\\infty}^{\\infty}e^{-t^2}dt=\\pi. \\] Image example # "},{"id":5,"href":"/docs/how_to_write_articles/","title":"How to Write Articles","section":"Docs","content":" 記事の投稿方法 # 構成 # サイトはHugoのHugo-bookテーマ用いて作成しました． ディレクトリ構成は以下のとおりです． 基本的にいじるのはcontent以下のディレクトリだけです．\n. ├── archetypes ├── config └── _default ├── hugo.toml └── params.toml ├── content ├── docs │ ├── tutorials │ │ ├── example │ │ │ ├── bioinfo_tutorial.webp │ │ │ └── index.md │ │ ├── test │ │ │ └── index.md │ │ ├── _index.md │ │ └── bioinfo_tutorial.webp │ ├── about.md │ └── members.md └── _index.md ├── data ├── i18n ├── layouts ├── public ├── resources ├── static ├── go.mod └── go.sum 記事の作成 # まず，Githubリポジトリのmainブランチをローカルにcloneしてください． 自分で新しい記事を作成，修正するときは，mainではない別のブランチ(自分の名前とか)を作成し，そこで作業するようにしてください．\n今後は基本的にcontent/docs/tutorials以下に，一記事ずつディレクトリを作成していきます．\n├── content ├── docs │ ├── tutorials │ │ ├── new_article │ │ │ ├── images │ │ │ └── index.md 作成したい記事のディレクトリを作成し，index.mdを作り，編集します．\nindex.mdにはヘッダーとして以下のものをつけてください．\n--- title: \u0026#34;Example\u0026#34; weight: 1 # bookFlatSection: false # bookToc: true # bookHidden: false # bookCollapseSection: false # bookComments: false # bookSearchExclude: false --- このときtitleにはディレクトリ名と同じ名前を基本的にはつけてください． weightはサイトの左側メニューに表示される時の順番を示しています．上に載せたいものほど小さい値をつけてください． 挿入する画像は，作成したディレクトリ以下に配置してください．\nmarkdownの編集方法については，Hugo-bookのサイトのShortcodesや，私が作成した記事とサイトを見比べてみてください．\n投稿方法 # 記事の作成が完了したら，git add \u0026amp;\u0026amp; git commitして，リポジトリにそのまま自分のブランチをpushしてください．\npushした自分のブランチをmainブランチに向けてプルリクエストを作成してください．\n無事，プルリクが受理され，mainブランチにマージされたら，Github Actionsが走り，hugoによりサイトがビルドされます． 北大バイオインフォのサイトに変更がなされているか確認してみてください．\nリンク # Githubリポジトリ Github pages Hugo-book "}]